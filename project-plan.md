---
description: プロジェクト開発の体系的ワークフロー管理
---

# プロジェクト開発ワークフロー

「〇〇が作りたい」という要望から、体系的に開発を進めるための対話的ワークフローを実行します。

## 概要

本コマンドは、曖昧な要求から具体的な実装まで、段階的な確認と必要に応じた質問生成により、確実にプロジェクトを具体化します。

### ワークフローの特徴

1. **段階的確認**: 各フェーズ完了後、ユーザーの承認を得てから次へ進む
2. **柔軟な質問生成**: 各段階で不明点があれば質問ファイルを生成
3. **非自動進行**: ユーザーが各コマンドを明示的に実行してコントロール
4. **修正可能**: いつでも前の段階に戻って修正可能

## 実行フロー

```mermaid
graph TD
    A[/project-plan 初期要望] --> B[対話的な要件収集]
    B --> C{要件は明確？}
    C -->|Yes| D[/project-requirements]
    C -->|No| E[追加質問]
    E --> B

    D --> F[requirements.md作成]
    F --> G{ユーザー承認？}
    G -->|修正要望| H[requirements-questions.md生成]
    H --> I[回答収集]
    I --> D
    G -->|承認| J[/project-analysis]

    J --> K[技術分析]
    K --> L{ユーザー承認？}
    L -->|質問あり| M[analysis-questions.md生成]
    M --> N[回答収集]
    N --> J
    L -->|承認| O[/project-design]

    O --> P[design.md作成]
    P --> Q{ユーザー承認？}
    Q -->|質問あり| R[design-questions.md生成]
    R --> S[回答収集]
    S --> O
    Q -->|承認| T[/project-tasks]

    T --> U[tasks.md作成]
    U --> V{ユーザー承認？}
    V -->|修正要望| T
    V -->|承認| W[実装開始]
```

## Phase 1: 初期要望の理解と対話的要件収集

### 実行方法
```
/project-plan "作りたいものの概要"
```

### 処理内容

1. **プロジェクトタイプの判定**
   - Webアプリケーション
   - モバイルアプリ
   - APIサービス
   - CLIツール
   - データ処理システム
   - その他

2. **対話的な基本情報収集**
   ```
   以下を対話形式で確認：
   - 何を作りたいか（プロダクトの概要）
   - 誰が使うか（ターゲットユーザー）
   - なぜ必要か（解決したい課題）
   - いつまでに必要か（タイムライン）
   - どんな制約があるか（技術的・ビジネス的制約）
   ```

3. **次のステップの案内**
   ```
   収集した情報をまとめました。
   次のコマンドを実行してください：
   /project-requirements
   ```

## Phase 2: 要件定義書作成

### 実行方法
```
/project-requirements              # 新規作成
/project-requirements --update     # 質問回答後の更新
```

### 処理内容

1. **requirements.md の生成**
   - `.claude/spec/requirements.md` に要件定義書を作成

2. **ユーザー確認**
   ```
   📄 要件定義書を作成しました。

   ✅ この内容で問題ありませんか？
   - 承認 → /project-analysis で技術調査へ
   - 修正要望 → 修正内容を教えてください
   - 不明点あり → 質問書を生成します
   ```

3. **必要に応じて質問生成**
   - `.claude/spec/requirements-questions.md` を生成
   - 回答後、`/project-requirements --update` で反映

### 質問テンプレート例
```markdown
# 要件定義に関する追加質問

## 機能要件の詳細
### Q1: [具体的な機能]について
【回答】

## 非機能要件の詳細
### Q2: パフォーマンス目標
【回答】
```

## Phase 3: 技術調査と選定

### 実行方法
```
/project-analysis                  # 技術分析実行
/project-analysis --update         # 質問回答後の更新
```

### 処理内容

1. **技術分析の実施**
   - プログラミング言語の選定と理由
   - フレームワーク/ライブラリの選定
   - アーキテクチャパターンの決定
   - データストレージの選定

2. **ユーザー確認**
   ```
   📄 技術分析レポートを作成しました。

   推奨技術スタック：
   [技術スタックの概要]

   ✅ この技術選定で進めてよろしいですか？
   - 承認 → /project-design で設計書作成へ
   - 別案希望 → 希望する技術を教えてください
   - 詳細確認 → 質問書を生成します
   ```

3. **必要に応じて質問生成**
   - `.claude/spec/analysis-questions.md` を生成

## Phase 4: 技術仕様書作成

### 実行方法
```
/project-design                    # 設計書作成
/project-design --update           # 質問回答後の更新
```

### 処理内容

1. **design.md の生成**
   - システムアーキテクチャ
   - データモデル設計
   - API設計
   - セキュリティ設計

2. **ユーザー確認**
   ```
   📄 技術仕様書を作成しました。

   ✅ この設計で実装を進めてよろしいですか？
   - 承認 → /project-tasks でタスク分解へ
   - 修正要望 → 変更点を教えてください
   - 詳細確認 → 質問書を生成します
   ```

3. **必要に応じて質問生成**
   - `.claude/spec/design-questions.md` を生成

## Phase 5: タスク分解

### 実行方法
```
/project-tasks                     # タスク分解実行
```

### 処理内容

1. **tasks.md の生成**
   - 環境構築タスク
   - 基盤実装タスク
   - 機能実装タスク
   - テスト実装タスク

2. **ユーザー確認**
   ```
   📄 タスク分解を完了しました。

   合計タスク数: XX
   推定工数: XXX時間

   ✅ このタスク分解で開発を開始してよろしいですか？
   - 承認 → 実装を開始できます
   - 調整要望 → 調整内容を教えてください
   ```

## 生成されるファイル構造

```
project-name/
├── .claude/
│   ├── spec/
│   │   ├── requirements.md              # 要件定義書
│   │   ├── requirements-questions.md    # 要件の追加質問（必要時）
│   │   ├── analysis.md                  # 技術分析レポート
│   │   ├── analysis-questions.md        # 技術の追加質問（必要時）
│   │   ├── design.md                    # 技術仕様書
│   │   ├── design-questions.md          # 設計の追加質問（必要時）
│   │   └── tasks.md                     # タスク分解
│   └── docs/                            # プロジェクトドキュメント
```

## 使用例

### 例1: ECサイト開発

```bash
# Day 1: 初期要件収集
User: /project-plan "ECサイトを作りたい"

Claude: どのような商品を扱うECサイトですか？
User: ハンドメイド作品を扱うマーケットプレイス

Claude: 主なターゲットユーザーは？
User: 20-40代の女性、作家と購入者の両方

Claude: 基本情報を収集しました。
次は `/project-requirements` を実行してください。

# 要件定義
User: /project-requirements

Claude: 📄 要件定義書を作成しました。
[要件の概要表示]
✅ 問題ありませんか？

User: 決済方法について詳しく決めたい

Claude: 📄 requirements-questions.mdを作成しました。
回答後、`/project-requirements --update` を実行してください。

# Day 2: 技術検討
User: /project-analysis

Claude: 📄 技術分析を完了しました。
推奨: Next.js + Stripe + PostgreSQL
✅ この技術スタックで進めますか？

User: 承認します

# Day 3: 設計・タスク分解
User: /project-design
[設計書作成・確認]

User: /project-tasks
[タスク分解・確認]
```

## 成功基準

- [ ] ユーザーの要望が明確な要件に変換されている
- [ ] 各フェーズでユーザーの承認を得ている
- [ ] 不明点が質問により解消されている
- [ ] 技術選定が要件に適合し、根拠が明確
- [ ] 実装可能な技術仕様が定義されている
- [ ] タスクが適切な粒度に分解されている

## 注意事項

- **自動進行しない**: 各フェーズ後、必ずユーザーの指示を待つ
- **質問は柔軟に**: どの段階でも必要に応じて質問ファイルを生成
- **修正は随時可能**: ユーザーの要望に応じていつでも前の段階を修正
- **承認を重視**: ユーザーの明確な承認なしに次のフェーズに進まない